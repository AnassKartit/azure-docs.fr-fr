### YamlMime:FAQ
metadata:
  title: Forum aux questions
  description: Réponses aux questions fréquemment posées sur Microsoft Azure Attestation
  services: attestation
  author: msmbaldwin
  ms.service: attestation
  ms.topic: reference
  ms.date: 07/20/2020
  ms.author: mbaldwin
  ms.openlocfilehash: 662408ecd8071a5d877a1c24ebba2f2d40d76eca
  ms.sourcegitcommit: 5163ebd8257281e7e724c072f169d4165441c326
  ms.translationtype: HT
  ms.contentlocale: fr-FR
  ms.lasthandoff: 06/21/2021
  ms.locfileid: "112417085"
title: Foire aux questions pour Microsoft Azure Attestation
summary: >
  Cet article fournit des réponses à certaines des questions les plus courantes sur [Azure Attestation](overview.md).


  Si votre problème Azure n’est pas traité dans cet article, vous pouvez également envoyer une demande de support Azure sur la [page du support Azure](https://azure.microsoft.com/support/options/).
sections:
- name: Ignoré
  questions:
  - question: >
      Qu’est-ce que le THIM (Trusted Hardware Identity Management) et son rôle dans l’attestation d’enclave
    answer: "Trusted Hardware Identity Management (THIM) définit la ligne de base an matière de sécurité Azure pour les nœuds[Informatique confidentielle Azure (ACC)](../confidential-computing/overview.md) d’Intel et met en cache les données. Les informations mises en cache seront ensuite utilisées par Azure Attestation dans la validation des environnements d’exécution approuvés (TEE).  \n\nTHIM est recommandé pour les raisons suivantes :\n   - Offre une haute disponibilité. \n   - Réduit la dépendance vis-à-vis des services hébergés à l’extérieur et de la connectivité Internet.\n   - Récupère les versions les plus récentes des certificats Intel, des listes de révocation de certificats, des informations TCB (Trusted Computing Base) et de l’identité Quoting Enclave des nœuds ACC auprès d’Intel. Le service confirme donc la ligne de base de sécurité Azure à laquelle doit se référer Azure Attestation lors de la validation des TEE, ce qui réduit considérablement les échecs d’attestation dus à l’invalidation ou à la révocation des certificats Intel.  \n"
  - question: >
      L’attestation SGX est-elle prise en charge par Azure Attestation dans des environnements non-Azure ?
    answer: "Non. L’attestation Azure dépend de la ligne de base de sécurité indiquée par THIM (Trusted Hardware Identity Management) pour valider les TEE. THIM est actuellement conçu pour prendre en charge uniquement les nœuds Informatique confidentielle Azure. \n"
  - question: >
      Quelles sont les validations effectuées par Azure Attestation pour attester des enclaves SGX ?
    answer: >
      Azure Attestation est une infrastructure unifiée permettant d’attester à distance de différents types de TEE. Azure Attestation :

         - Valide si la racine approuvée d’un devis d’enclave signé appartient à Intel.
         - Valide si le devis de l’enclave est conforme à la ligne de base de sécurité Azure, comme défini par THIM (Trusted Hardware Identity Management).
         - Valide si le hachage SHA256 de la propriété Enclave Held Data (EHD) dans l’objet de demande d’attestation correspond aux 32 premiers octets du champ reportData dans le devis d’enclave.
         - Permet aux clients de créer un fournisseur d’attestations et de configurer une stratégie personnalisée. Outre les validations ci-dessus, Azure Attestation évalue le devis d’enclave par rapport à la stratégie. Les stratégies définissent des règles d’autorisation pour l’enclave et dictent les règles de délivrance pour la génération du jeton d’attestation. Pour confirmer si le logiciel prévu fonctionne dans une enclave, les clients peuvent ajouter des règles d’autorisation afin de vérifier si les champs **mrsigner** et **mrenclave** du devis d’enclave correspondent aux valeurs des fichiers binaires du client.
  - question: >
      Comment un vérificateur peut-il obtenir la documentation relative à l’attestation SGX prise en charge par Azure Attestation ?
    answer: "En général, pour les modèles d’attestation ayant Intel comme racine de confiance, le client d’attestation parle aux API d’enclave pour extraire la preuve de l’enclave. Les API d’enclave appellent en interne le service caching Intel PCK pour extraire les certificats Intel du nœud à attester. Les certificats sont utilisés pour signer la preuve de l’enclave, générant ainsi une documentation pouvant être attestée à distance.  \n\nLe même processus peut être implémenté pour Azure Attestation. Toutefois, pour tirer parti des avantages offerts par Trusted Hardware Identity Management (THIM), après l’installation de la machine virtuelle ACC, il est recommandé d’installer la [bibliothèque Azure DCAP](https://www.nuget.org/packages/Microsoft.Azure.DCAP). Selon l’accord conclu avec Intel, lors de l’installation de la bibliothèque Azure DCAP, les demandes de génération de preuve d’enclave sont redirigées du service caching Intel PCK vers THIM. La bibliothèque Azure DCAP est prise en charge dans les environnements Windows et Linux.\n"
  - question: >
      Comment passer à Azure Attestation à partir d’autres modèles d’attestation ?
    answer: "- Après l’installation de la machine virtuelle Informatique confidentielle Azure, installez la bibliothèque Azure DCAP ([Windows](https://www.nuget.org/packages/Microsoft.Azure.DCAP/)/[Linux](https://packages.microsoft.com/ubuntu/18.04/prod/pool/main/a/az-dcap-client/)) pour tirer parti des avantages offerts par Trusted Hardware Identity Management (THIM).\n- Un client d’attestation à distance doit être créé pour pouvoir récupérer la preuve de l’enclave et envoyer des demandes à Azure Attestation. Voir des [exemples de code](/samples/browse/?expanded=azure&terms=attestation) pour référence. \n- Les demandes d’attestation peuvent être envoyées au point de terminaison de l’API REST des fournisseurs par défaut ou des fournisseurs d’attestations personnalisés. \n- Les API Azure Attestation sont protégées par l’authentification Azure AD. Par conséquent, le client qui appelle les API d’attestation doit pouvoir obtenir et transmettre un jeton d’accès Azure AD valide dans la demande d’attestation. \n"
  - question: >
      Comment la partie de confiance peut-elle vérifier l’intégrité du jeton d’attestation ?
    answer: "Le jeton d’attestation généré par Azure Attestation est signé à l’aide d’un certificat auto-signé. Les certificats sont exposés via un [point de terminaison de métadonnées OpenID](/rest/api/attestation/metadataconfiguration/get). La partie de confiance peut récupérer les certificats de signature à partir de ce point de terminaison et vérifier la signature du jeton d’attestation. La durée de validité du jeton d’attestation est de 8 heures. \n"
  - question: >
      Comment identifier le certificat à utiliser pour la vérification de la signature dans le point de terminaison de métadonnées OpenID ?
    answer: >
      Plusieurs certificats exposés dans le point de terminaison de métadonnées OpenID correspondent à différents cas d’utilisation (par exemple, l’attestation SGX) pris en charge par Azure Attestation. Conformément aux critères spécifiés par la norme [RFC 7515](https://tools.ietf.org/html/rfc7515), le certificat dont l’ID de clé (kid) correspond au paramètre *Kid* dans l’en-tête du jeton d’attestation doit être utilisé pour la vérification de la signature. Si aucune correspondance **kid** n’est trouvée, vous devez essayer tous les certificats exposés par le point de terminaison de métadonnées OpenID.
  - question: >
      Est-il possible pour la partie de confiance de partager des secrets avec les environnements d’exécution approuvés (TEE) validés ?
    answer: La clé publique générée au sein d’une enclave peut être exprimée dans la propriété Enclave Held Data (EHD) de l’objet de demande d’attestation envoyé par le client à Azure Attestation. Après avoir confirmé si le hachage SHA256 d’EHD est exprimé dans le champ reportData du devis, Azure Attestation inclut EHD dans le jeton d’attestation. La partie de confiance peut utiliser la propriété EHD de la réponse d’attestation vérifiée pour chiffrer les secrets et les partager avec l’enclave. Pour plus d’informations, consultez [Concepts de base d’Azure Attestation](basic-concepts.md).
