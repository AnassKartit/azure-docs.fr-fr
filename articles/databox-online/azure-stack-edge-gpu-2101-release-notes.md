---
title: Notes de publication de la version 2101 d’Azure Stack Edge Pro
description: Décrit les problèmes majeurs existants et les résolutions possibles pour Azure Stack Edge Pro sous la version 2101.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: article
ms.date: 02/08/2021
ms.author: alkohli
ms.openlocfilehash: eb01ae5e9c7e134e33460674eb2c44b710671a4a
ms.sourcegitcommit: d1b0cf715a34dd9d89d3b72bb71815d5202d5b3a
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/08/2021
ms.locfileid: "99833352"
---
# <a name="azure-stack-edge-2101-release-notes"></a>Notes de publication de la version 2101 d’Azure Stack Edge

Les notes de publication suivantes identifient les problèmes critiques, résolus ou non, de la version 2101 pour les appareils Azure Stack Edge. Ces notes de publication s’appliquent aux appareils Azure Stack Edge Pro avec GPU, Azure Stack Edge Pro R et Azure Stack Edge Mini R. Les fonctionnalités et les problèmes qui correspondent à un modèle spécifique sont indiqués dans la mesure du possible.

Les notes de publication sont régulièrement mises à jour ; les problèmes critiques nécessitant une solution de contournement sont ajoutés au fur et à mesure de leur découverte. Avant de déployer votre appareil, lisez attentivement les informations contenues dans les notes de publication.

Cet article concerne la version **Azure Stack Edge 2101**, qui correspond au numéro de version logicielle **2.2.1473.2521**.

## <a name="whats-new"></a>Nouveautés

Les nouvelles fonctionnalités suivantes sont disponibles dans la version 2101 d’Azure Stack Edge. 

- **Disponibilité générale des appareils Azure Stack Edge Pro R et Azure Stack Edge Mini R** : à partir de cette version, les appareils Azure Stack Edge Pro R et Azure Stack Edge Mini R sont disponibles. Pour plus d’informations, consultez [Qu’est-ce qu’Azure Stack Edge Pro R](azure-stack-edge-j-series-overview.md) et [Qu’est-ce qu’Azure Stack Edge Mini R](azure-stack-edge-k-series-overview.md).  
- **Gestion cloud des machines virtuelles** : à partir de cette version, vous pouvez créer et gérer les machines virtuelles sur votre appareil via le Portail Azure. Pour plus d’informations, consultez [Déployer des machines virtuelles via le Portail Azure](azure-stack-edge-gpu-deploy-virtual-machine-portal.md).
- **Intégration à Azure Monitor** : vous pouvez à présent utiliser Azure Monitor pour surveiller les conteneurs à partir des applications de calcul qui s’exécutent sur votre appareil. Le magasin de métriques Azure Monitor n’est pas pris en charge dans cette version. Pour plus d’informations, consultez [Activer Azure Monitor pour votre appareil](azure-stack-edge-gpu-enable-azure-monitor.md).
- **Registre de conteneurs Edge** : dans cette version, un registre de conteneurs Edge est disponible pour fournir un dépôt à la périphérie de votre appareil. Vous pouvez utiliser ce registre pour stocker et gérer vos images conteneurs. Pour plus d’informations, consultez [Activer le registre de conteneurs Edge](azure-stack-edge-gpu-deploy-arc-kubernetes-cluster.md). 
- **Réseau privé virtuel (VPN)**  : utilisez le VPN afin de fournir une autre couche de chiffrement pour les données qui transitent entre les appareils et le cloud. Le VPN est disponible uniquement sur Azure Stack Edge Pro R et Azure Stack Edge Mini R. Pour plus d’informations, consultez [Configurer un VPN sur votre appareil](azure-stack-edge-mini-r-configure-vpn-powershell.md). 
- **Rotation des clés de chiffrement au repos** : vous pouvez désormais permuter les clés de chiffrement au repos qui sont utilisées pour protéger les lecteurs de votre appareil. Cette fonctionnalité est disponible uniquement sur les appareils Azure Stack Edge Pro R et Azure Stack Edge Mini R. Pour plus d’informations, consultez [Rotation des clés de chiffrement au repos](azure-stack-edge-gpu-manage-access-power-connectivity-mode.md#manage-access-to-device-data).
- **Journalisation proactive** : à partir de cette version, vous pouvez activer la collecte de journaux proactive sur votre appareil Azure Stack Edge en fonction des indicateurs d’intégrité du système afin de résoudre efficacement tout problème lié à l’appareil. Pour plus d’informations, consultez [Collecte de journaux proactive sur votre appareil](azure-stack-edge-gpu-proactive-log-collection.md).


## <a name="known-issues-in-2101-release"></a>Problèmes connus dans la version 2101

Le tableau suivant récapitule les problèmes connus de la version 2101.

| Non. | Fonctionnalité | Problème | Solution de contournement/commentaires |
| --- | --- | --- | --- |
|**1.**|Fonctionnalités de préversion |Pour cette version, les fonctionnalités ci-après  (Azure Resource Manager en local, machines virtuelles, gestion cloud des machines virtuelles, Kubernetes avec Azure Arc, VPN pour Azure Stack Edge Pro R et Azure Stack Edge Mini R, service multiprocessus (MPS) pour appareil Azure Stack Edge Pro avec GPU) sont tous disponibles en préversion.  |Ces fonctionnalités seront généralement disponibles dans une version ultérieure. |
|**2.**|Tableau de bord Kubernetes | Le point de terminaison *HTTPS* pour le tableau de bord Kubernetes avec le certificat SSL n’est pas pris en charge. | |
|**3.**|Kubernetes |Le registre de conteneurs Edge ne fonctionne pas lorsque le proxy web est activé.|Cette fonctionnalité sera disponible dans une prochaine version. |
|**4.**|Kubernetes |Le registre de conteneurs Edge ne fonctionne pas avec les modules IoT Edge.| |
|**5.**|Kubernetes |Kubernetes ne prend pas en charge « : » dans les noms de variables d’environnement utilisés par les applications .NET. Cela est également nécessaire pour que le module Event Grid IoT Edge fonctionne sur l’appareil Azure Stack Edge et d’autres applications. Pour plus d’informations, consultez la [documentation sur ASP.NET Core](/aspnet/core/fundamentals/configuration/?tabs=basicconfiguration&view=aspnetcore-3.1&preserve-view=true#environment-variables).|Remplacez « : » par un trait de soulignement double. Pour plus d’informations, consultez la section [Problème Kubernetes](https://github.com/kubernetes/kubernetes/issues/53201).|
|**6.** |Cluster Azure Arc + Kubernetes |Par défaut, lorsque les ressources `yamls` sont supprimées du référentiel Git, les ressources correspondantes ne sont pas supprimées du cluster Kubernetes.  |Pour autoriser la suppression des ressources quand elles sont supprimées du référentiel git, définissez `--sync-garbage-collection` dans OperatorParams, dans Arc. Pour plus d’informations, consultez [Supprimer une configuration](../azure-arc/kubernetes/use-gitops-connected-cluster.md#additional-parameters). |
|**7.**|NFS |Les applications qui utilisent des montages de partage NFS sur votre appareil pour écrire des données doivent utiliser l’écriture exclusive. Ceci garantit que les écritures sont écrites sur le disque.| |
|**8.**|Configuration du calcul |La configuration du calcul échoue dans les configurations réseau où les passerelles, commutateurs ou routeurs répondent aux demandes ARP (Address Resolution Protocol) pour des systèmes qui n’existent pas sur le réseau.| |
|**9.**|Calcul et Kubernetes |Si Kubernetes est configuré en premier sur votre appareil, il réclame tous les GPU disponibles. Par conséquent, il n’est pas possible de créer des machines virtuelles Azure Resource Manager à l’aide de GPU après avoir configuré Kubernetes. |Si votre appareil a 2 GPU, vous pouvez créer 1 machine virtuelle qui utilise le GPU, puis configurer Kubernetes. Dans ce cas, Kubernetes utilise le GPU disponible restant. |


## <a name="known-issues-from-previous-releases"></a>Problèmes connus issus des versions précédentes

Le tableau suivant fournit un résumé des problèmes connus déjà présents dans les versions précédentes.

| Non. | Fonctionnalité | Problème | Solution de contournement/commentaires |
| --- | --- | --- | --- |
| **1.** |Azure Stack Edge Pro + SQL Azure | La création d’une base de données SQL nécessite un accès administrateur.   |Suivez les étapes suivantes au lieu des étapes 1-2 dans [https://docs.microsoft.com/azure/iot-edge/tutorial-store-data-sql-server#create-the-sql-database](../iot-edge/tutorial-store-data-sql-server.md#create-the-sql-database). <ul><li>Dans l’interface utilisateur locale de votre appareil, activez l’interface de calcul. Sélectionnez **Compute > N° de port > Activer pour le calcul > Appliquer.**</li><li>Téléchargez `sqlcmd` sur votre ordinateur client à partir de https://docs.microsoft.com/sql/tools/sqlcmd-utility. </li><li>Connectez-vous à l’adresse IP de votre interface de calcul (port activé), en ajoutant un « 1401 » à la fin de l’adresse.</li><li>La commande finale ressemble à ceci : sqlcmd -S {Interface IP},1401 -U SA -P "Strong!Passw0rd".</li>Ensuite, les étapes 3-4 de la documentation actuelle devraient être identiques. </li></ul> |
| **2.** |Actualiser| Les modifications incrémentielles d’objets blob restaurés via la fonctionnalité **Actualiser** ne sont pas prises en charge. |Pour les points de terminaison d’objet blob, des mises à jour partielles d’objets blob après une actualisation peuvent empêcher le chargement des mises à jour dans le cloud. Prenons l’exemple de la séquence d’actions suivante :<ul><li>Créer un objet blob dans le cloud. Ou supprimer un objet blob précédemment chargé à partir de l’appareil.</li><li>Actualiser l’objet blob à partir du cloud dans l’appliance à l’aide de la fonctionnalité d’actualisation.</li><li>Mettre à jour uniquement une partie de l’objet blob à l’aide des API REST du Kit de développement logiciel (SDK) Azure.</li></ul>Ces actions peuvent avoir pour effet que des sections mises à jour de l’objet blob ne sont pas mises à jour dans le cloud. <br>**Solution de contournement** : servez-vous d’outils tels que Robocopy ou d’une copie de fichiers normale via l’Explorateur ou la ligne de commande pour remplacer des objets blob entiers.|
|**3.**|Limitation|Lors d’une limitation, si de nouvelles écritures sur l’appareil ne sont pas autorisées, les écritures effectuées par le client NFS échouent avec l’erreur « Autorisation refusée ».| L’erreur s’affiche comme ci-dessous :<br>`hcsuser@ubuntu-vm:~/nfstest$ mkdir test`<br>mkdir : impossible de créer le répertoire ’test’ : Autorisation refusée|
|**4.**|Ingestion du Stockage Blob|Lors de l’utilisation d’AzCopy version 10 pour l’ingestion du stockage d’objets blob, exécutez AzCopy avec l’argument suivant : `Azcopy <other arguments> --cap-mbps 2000`.| Si ces limites ne sont pas fournies pour AzCopy, cela risque d’entraîner l’envoi d’un grand nombre de demandes à l’appareil et d’occasionner des problèmes avec le service.|
|**5.**|Comptes de stockage hiérarchisés|Voici ce qu’il se produit lors de l’utilisation de comptes de stockage hiérarchisés :<ul><li> Seuls les objets blob de blocs sont pris en charge. Les objets blob de pages ne sont pas pris en charge.</li><li>Il n’existe aucune prise en charge de l’API de copie ou de capture instantanée.</li><li> L’ingestion de charge de travail Hadoop via `distcp` n’est pas prise en charge, car elle sollicite abondamment l’opération de copie.</li></ul>||
|**6.**|Connexion de partage NFS|Si plusieurs processus copient vers le même partage et que l’attribut `nolock` n’est pas utilisé, des erreurs peuvent apparaître en cours de copie.|L’attribut `nolock` doit être passé à la commande mount pour copier des fichiers vers le partage NFS. Par exemple : `C:\Users\aseuser mount -o anon \\10.1.1.211\mnt\vms Z:`.|
|**7.**|Cluster Kubernetes|Lorsque vous appliquez une mise à jour sur votre appareil exécutant un cluster Kubernetes, les machines virtuelles Kubernetes redémarrent. Dans ce cas, seuls les pods déployés avec des réplicas spécifiés sont automatiquement restaurés après une mise à jour.  |Si vous avez créé des pods individuels en dehors d’un contrôleur de réplication sans spécifier de jeu de réplicas, ces pods ne seront pas restaurés automatiquement après la mise à jour de l’appareil. Vous devrez les restaurer.<br>Un jeu de réplicas remplace des pods supprimés ou arrêtés pour une raison quelconque, par exemple un échec de nœud ou une mise à niveau de nœud perturbatrice. Pour cette raison, nous vous recommandons d’utiliser un jeu de réplicas, même si votre application ne requiert qu’un seul pod.|
|**8.**|Cluster Kubernetes|Kubernetes sur Azure Stack Edge Pro est pris en charge uniquement avec Helm v3 ou ultérieur. Pour plus d’informations, consultez le [Forum Aux Questions : Suppression de Tiller](https://v3.helm.sh/docs/faq/).|
|**9.**|Kubernetes avec Azure Arc |Pour la disponibilité générale, Kubernetes activé par Azure Arc est mis à jour de la version 0.1.18 vers la version 0.2.9. Étant donné que la mise à jour de Kubernetes activé par Azure Arc n’est pas pris en charge sur un appareil Azure Stack Edge, vous devez redéployer Kubernetes activé par Azure Arc.|Effectuez les étapes suivantes :<ol><li>[Appliquez les mises à jour logicielles de l’appareil et de Kubernetes](azure-stack-edge-gpu-install-update.md).</li><li>Connectez-vous à l’[interface PowerShell de l’appareil](azure-stack-edge-gpu-connect-powershell-interface.md).</li><li>Supprimez l’agent Azure Arc existant. Entrez : `Remove-HcsKubernetesAzureArcAgent`.</li><li>Déployez [Azure Arc sur une nouvelle ressource](azure-stack-edge-gpu-deploy-arc-kubernetes-cluster.md). N’utilisez pas de ressource Azure Arc existante.</li></ol>|
|**10.**|Kubernetes avec Azure Arc|Les déploiements d’Azure Arc ne sont pas pris en charge si un proxy web est configuré sur votre appareil Azure Stack Edge Pro.||
|**11.**|Kubernetes |Le port 31000 est réservé au tableau de bord Kubernetes. Le port 31001 est réservé au registre de conteneurs Edge. De même, dans la configuration par défaut, les adresses IP 172.28.0.1 et 172.28.0.10 sont réservées respectivement pour le service Kubernetes et le service DNS de base.|N’utilisez pas d’adresses IP réservées.|
|**12.**|Kubernetes |Kubernetes n’autorise pas actuellement les services LoadBalancer multiprotocoles. Par exemple, un service DNS devant écouter à la fois les protocoles TCP et UDP. |Pour contourner cette limitation de Kubernetes avec MetalLB, deux services (un pour TCP, un pour UDP) peuvent être créés sur le même sélecteur de pod. Ces services utilisent la même clé de partage et spec.loadBalancerIP pour partager la même adresse IP. Des adresses IP peuvent également être partagées si vous avez plus de services qu’il n’y d’adresses IP disponibles. <br> Pour plus d’informations, voir [Partage d’adresse IP](https://metallb.universe.tf/usage/#ip-address-sharing).|
|**13.**|Cluster Kubernetes|Des modules existants de la Place de marché Azure IoT Edge peuvent nécessiter des modifications pour s’exécuter sur IoT Edge sur un appareil Azure Stack Edge.|Pour plus d’informations, consultez Modifier des modules Azure IoT Edge de la place de marché pour les exécuter sur des appareils Azure Stack Edge.<!-- insert link-->|
|**14.**|Kubernetes |Les montages de liaison basés sur des fichiers ne sont pas pris en charge avec Azure IoT Edge sur Kubernetes sur un appareil Azure Stack Edge.|IoT Edge utilise une couche de traduction pour convertir des options de `ContainerCreate` en constructions Kubernetes. La création de `Binds` mappe au répertoire `hostpath`. Par conséquent, des montages de liaison basés sur des fichiers ne peuvent pas être liés à des chemins d’accès dans des conteneurs IoT Edge. Si possible, mappez le répertoire parent.|
|**15.**|Kubernetes |Si vous apportez vos propres certificats pour IoT Edge et que vous les ajoutez sur votre appareil Azure Stack Edge une fois le calcul configuré sur celui-ci, les nouveaux certificats ne sont pas sélectionnés.|Pour contourner ce problème, vous devez charger les certificats avant de configurer le calcul sur l’appareil. Si le calcul est déjà configuré, [connectez-vous à l’interface PowerShell de l’appareil et exécutez des commandes IoT Edge](azure-stack-edge-gpu-connect-powershell-interface.md#use-iotedge-commands). Redémarrez les pods `iotedged` et `edgehub`.|
|**16.**|Certificats |Dans certains cas, la mise à jour de l’état des certificats dans l’interface utilisateur locale peut prendre plusieurs secondes. |Les scénarios suivants dans l’interface utilisateur locale peuvent être affectés.<ul><li>Colonne **État** dans la page **Certificats**.</li><li>Vignette **Sécurité** dans la page **Démarrer**.</li><li>Vignette **Configuration** dans la page **Vue d’ensemble**.</li></ul>  |
|**17.**|IoT Edge |Les modules déployés via IoT Edge ne peuvent pas utiliser le réseau hôte. | |
|**18.**|Calcul + Kubernetes |Le calcul/Kubernetes ne prend pas en charge le proxy web NTLM. ||
|**19.**|Kubernetes + mise à jour |Les versions logicielles antérieures, telles que les versions 2008, présentent un problème de mise à jour de condition de concurrence qui provoque l’échec de la mise à jour avec ClusterConnectionException. |L’utilisation des builds plus récentes devrait permettre d’éviter ce problème. Si ce problème persiste, la solution de contournement consiste à retenter la mise à niveau, qui devrait fonctionner.|
|**20**|Internet Explorer|Si les fonctionnalités de sécurité améliorées sont activées, vous ne pourrez peut-être pas accéder aux pages de l’interface utilisateur web locale. | Désactivez la sécurité renforcée, puis redémarrez votre navigateur.|


<!--|**18.**|Azure Private Edge Zone (Preview) |There is a known issue with Virtual Network Function VM if the VM was created on Azure Stack Edge device running earlier preview builds such as 2006/2007b and then the device was updated to 2009 GA release. The issue is that the VNF information can't be retrieved or any new VNFs can't be created unless the VNF VMs are deleted before the device is updated.  |Before you update Azure Stack Edge device to 2009 release, use the PowerShell command `get-mecvnf` followed by `remove-mecvnf <VNF guid>` to remove all Virtual Network Function VMs one at a time. After the upgrade, you will need to redeploy the same VNFs.|-->


## <a name="next-steps"></a>Étapes suivantes

- [Mettre à jour votre appareil](azure-stack-edge-gpu-install-update.md)
